"use strict";(()=>{var e={};e.id=8367,e.ids=[8367],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63786:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>f,originalPathname:()=>Z,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>_});var s={};o.r(s),o.d(s,{DELETE:()=>DELETE}),o(95655);var a=o(83323),i=o(54647),l=o(27454),d=o(13234),n=o(97355),r=o(59465),u=o(66886);let DELETE=async(e,{params:t})=>{await (0,l.Z)();try{let e=t.id,o=await r.Z.findOne({_id:e});if(console.log("shop exist",o),!o)return u.Z.json({message:"Shop Not Found"},{status:200});{let e=await n.Z.find({mid:o._id});if(console.log("merchant menu",e),e.length>0){let e=await n.Z.deleteMany({mid:o._id});if(console.log("deleted menu",e),e){let e=await d.Z.find({mid:o._id});if(e.length>0){let e=await d.Z.deleteMany({mid:o._id});if(e){console.log("Categories Deleted Successfully");let e=await r.Z.deleteOne({_id:o._id});if(e)return u.Z.json({message:"Shop Deleted Successfully"},{status:200});return u.Z.json({message:"Failed To Delete Shop"},{status:200})}console.log("Failed To Delete Categories")}if(0==e.length){let e=await r.Z.deleteOne({_id:o._id});if(e)return u.Z.json({message:"Shop Deleted Successfully"},{status:200});return u.Z.json({message:"Failed To Delete Shop"},{status:200})}}e||console.log("Failed To Delete Items")}if(0==e.length){console.log("No Menu found");let e=await d.Z.find({mid:o._id});if(console.log("categories",e),e.length>0){let e=await d.Z.deleteMany({mid:o._id});if(console.log("category deleted",e),e){let e=await r.Z.deleteOne({_id:o._id});if(e)return u.Z.json({message:"Shop Deleted Successfully"},{status:200});return u.Z.json({message:"Failed To Delete Shop"},{status:200})}console.log("Failed To Delete Category")}if(0==e.length){console.log("No Categories Found");let e=await r.Z.deleteOne({_id:o._id});if(console.log("Shop deleted",e),e)return u.Z.json({message:"Shop Deleted Successfully"},{status:200});return u.Z.json({message:"Failed To Delete Shop"},{status:200})}}}}catch(e){return console.log(e.message),u.Z.json({message:"Internal Server Error"},{status:500})}},g=a.AppRouteRouteModule,p=new g({definition:{kind:i.x.APP_ROUTE,page:"/api/deleteshop/[id]/route",pathname:"/api/deleteshop/[id]",filename:"route",bundlePath:"app/api/deleteshop/[id]/route"},resolvedPagePath:"/home/kapil/Desktop/adel social projects/adelsocial/app/api/deleteshop/[id]/route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:h,headerHooks:f,staticGenerationBailout:_}=p,Z="/api/deleteshop/[id]/route"},13234:(e,t,o)=>{o.d(t,{Z:()=>d});var s=o(11185),a=o.n(s);let i=new(a()).Schema({name:{type:String,required:!0},image:{type:String,required:!0},isAvailable:{type:Boolean,required:!1,default:!1},mid:{type:String,required:!0}},{timestamps:!0}),l=a().models.Categorie||new(a()).model("Categorie",i),d=l}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),o=t.X(0,[7882,9727,177,6981,7355,9465],()=>__webpack_exec__(63786));module.exports=o})();